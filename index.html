<!DOCTYPE html>
<html lang="vi">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Chuyên đề: Đại đoàn kết dân tộc – Tư tưởng Hồ Chí Minh</title>
  <meta name="description" content="Trang học liệu Chương 5: Đại đoàn kết toàn dân tộc & đoàn kết quốc tế – Tư tưởng Hồ Chí Minh. Có mục lục tự động, tìm kiếm, chỉnh sửa inline, in PDF." />
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
  <style>
    :root{
      --bg:#0b1020; --panel:#121936; --card:#0e1330; --muted:#94a3b8; --text:#e6eaf2;
      --brand:#6ea8fe; --acc:#8bafff; --ok:#22c55e; --warn:#f59e0b; --err:#ef4444;
      --br:16px; --line:rgba(148,163,184,.2);
    }
    *{box-sizing:border-box}
    html,body{margin:0;padding:0;background:var(--bg);color:var(--text);font-family:Inter,system-ui,Segoe UI,Roboto,Arial,sans-serif}
    a{color:var(--brand);text-decoration:none}
    a:hover{text-decoration:underline}
    .container{max-width:1100px;margin:0 auto;padding:24px}
    header{position:sticky;top:0;background:linear-gradient(180deg,var(--bg),rgba(11,16,32,.6));backdrop-filter:blur(8px);z-index:50;border-bottom:1px solid var(--line)}
    .topbar{display:flex;gap:12px;align-items:center;justify-content:space-between;padding:14px 0}
    .brand{display:flex;gap:10px;align-items:center}
    .logo{width:36px;height:36px;border-radius:10px;background:linear-gradient(135deg,var(--brand),var(--acc));display:grid;place-items:center;color:#0b1020;font-weight:800}
    .brand h1{font-size:18px;margin:0}
    .actions{display:flex;gap:10px;align-items:center}
    .btn{display:inline-flex;align-items:center;gap:8px;padding:10px 14px;border:1px solid var(--line);border-radius:12px;background:var(--panel);color:var(--text);cursor:pointer}
    .btn:hover{border-color:var(--brand)}
    .btn.primary{background:linear-gradient(180deg,var(--acc),var(--brand));color:#0b1020;border:0}

    main{display:grid;grid-template-columns:280px 1fr;gap:24px;margin-top:16px}
    @media (max-width:960px){ main{grid-template-columns:1fr} .toc{position:static; top:auto; } }

    .card{background:linear-gradient(180deg,rgba(255,255,255,.03),rgba(255,255,255,.01));border:1px solid var(--line);border-radius:var(--br)}
    .hero{padding:18px}
    .hero h2{margin:0 0 6px;font-size:22px}
    .hero p{margin:0;color:var(--muted)}
    .meta{display:flex;gap:12px;flex-wrap:wrap;color:var(--muted);font-size:14px}

    .toc{position:sticky;top:76px;height:calc(100dvh - 96px);overflow:auto;padding:14px}
    .toc h3{margin:8px 0 10px;font-size:14px;color:var(--muted)}
    .toc a{display:block;padding:8px 10px;border-radius:10px}
    .toc a.active{background:rgba(110,168,254,.12)}

    .paper{padding:18px}
    .paper h2{margin-top:0}
    section{padding:14px 10px;border-top:1px dashed var(--line)}
    section:first-of-type{border-top:0}
    h3{margin:8px 0}
    h4{margin:8px 0;color:#c7d2fe}
    .quote{padding:14px 16px;border-left:4px solid var(--brand);background:rgba(110,168,254,.08);border-radius:8px}
    .toolbar{display:flex;gap:10px;flex-wrap:wrap;padding:12px}
    .search{flex:1;min-width:240px;display:flex;gap:8px}
    .search input{flex:1;padding:10px 12px;border-radius:12px;border:1px solid var(--line);background:var(--card);color:var(--text)}
    .chip{display:inline-flex;align-items:center;gap:8px;padding:8px 10px;border:1px solid var(--line);border-radius:999px;background:var(--card);font-size:12px}
    mark{background:rgba(110,168,254,.35);padding:2px 4px;border-radius:6px}
    .foot{margin-top:24px;padding:18px;color:var(--muted);border-top:1px solid var(--line)}
    .small{font-size:13px;color:var(--muted)}

    /* --- Banner --- */
    .banner{position:relative;margin:16px 0;border-radius:16px;overflow:hidden;border:1px solid var(--line);box-shadow:0 18px 40px rgba(0,0,0,.25)}
    .banner img{display:block;width:100%;height:320px;object-fit:cover;filter:saturate(1.05)}
    .banner::after{content:'';position:absolute;inset:0;background:linear-gradient(180deg,rgba(0,0,0,.25),rgba(0,0,0,.55))}
    .banner .cap{position:absolute;left:20px;bottom:16px;color:#fff;font-weight:600;letter-spacing:.2px}
    .banner .cap .sub{display:block;font-weight:500;opacity:.9;font-size:14px}

    /* --- Gallery --- */
    .gallery{display:grid;grid-template-columns:repeat(12,1fr);gap:14px;margin-top:10px}
    .gallery .fig{grid-column:span 12;background:var(--card);border:1px solid var(--line);border-radius:14px;overflow:hidden;box-shadow:0 10px 30px rgba(0,0,0,.25)}
    @media(min-width:700px){.gallery .fig{grid-column:span 6}}
    @media(min-width:1040px){.gallery .fig{grid-column:span 4}}
    .fig img{display:block;width:100%;height:220px;object-fit:cover}
    .fig figcaption{padding:10px 12px;color:var(--muted);font-size:13px;border-top:1px solid var(--line)}

    /* --- Lightbox --- */
    .lb{position:fixed;inset:0;background:rgba(0,0,0,.85);display:none;align-items:center;justify-content:center;z-index:9999}
    .lb.open{display:flex}
    .lb-inner{max-width:min(1100px,92vw);max-height:88vh}
    .lb-inner img{width:100%;height:auto;border-radius:12px}
    .lb .close{position:absolute;top:16px;right:16px;background:#0008;border:1px solid #fff3;color:#fff;padding:8px 10px;border-radius:10px;cursor:pointer}
    .lb .caption{position:absolute;left:50%;bottom:20px;transform:translateX(-50%);color:#fff;background:#0008;padding:8px 12px;border-radius:10px;font-size:14px;max-width:80vw}
  </style>
</head>
<body>
  <header>
    <div class="container topbar">
      <div class="brand">
        <div class="logo">H5</div>
        <h1>Tư tưởng HCM – Chương 5</h1>
      </div>
      <div class="actions">
        <button class="btn" id="btnPrint" title="In / Xuất PDF">🖨️ In</button>
        <button class="btn" id="btnCopyLink" title="Sao chép liên kết mục hiện tại">🔗 Copy mục</button>
        <button class="btn primary" id="btnEdit" title="Bật chỉnh sửa inline">✍️ Chỉnh sửa</button>
      </div>
    </div>
  </header>

  <div class="container">
    <div class="card hero">
      <div class="meta">
        <div>📚 Học phần: Tư tưởng Hồ Chí Minh</div>
        <div>🧩 Chủ đề: Đại đoàn kết toàn dân tộc & đoàn kết quốc tế</div>
        <div>🗓️ Cập nhật: <span id="lastUpdated"></span></div>
      </div>
      <h2>Đặt vấn đề / câu hỏi kiến tạo</h2>
      <p id="problem">
        Trong lịch sử, nhiều phong trào cách mạng từng kêu gọi đoàn kết nhưng chỉ dừng lại ở mức tạm thời, khi đạt mục tiêu thì khối đoàn kết tan rã.
        Hồ Chí Minh khẳng định: “Đoàn kết là then chốt của thành công” và coi đó là chiến lược xuyên suốt.
        <strong>Vậy đoàn kết dân tộc</strong> trong tư tưởng Hồ Chí Minh là <em>sách lược tình thế</em> hay là <em>chiến lược mang tính sống còn</em>?
      </p>
      <div class="quote small">💡 Gợi ý: Trả lời bằng cách trình bày hệ thống luận điểm – luận cứ – dẫn chứng lịch sử – vận dụng hiện nay.</div>
      <div class="toolbar">
        <div class="search">
          <input id="searchBox" placeholder="Tìm nhanh trong trang (ví dụ: 'Mặt trận')" />
          <button class="btn" id="btnFind">🔍 Tìm</button>
        </div>
        <span class="chip">⌘/Ctrl + F: tìm trình duyệt</span>
        <span class="chip">S: bật chỉnh sửa</span>
      </div>
    </div>

    <!-- Hero banner -->
    <div class="banner">
      <img src="images/doan-ket-lehoi.jpeg" alt="Không khí đoàn kết toàn dân trong ngày hội lớn"/>
      <div class="cap">Khối đại đoàn kết toàn dân tộc<span class="sub">Sức mạnh vô địch – chìa khóa của mọi thắng lợi</span></div>
    </div>

    <main>
      <nav class="card toc" id="toc">
        <h3>Mục lục</h3>
        <!-- TOC items will be injected -->
      </nav>

      <article class="card paper" id="paper" contenteditable="false">
        <h2 id="chuong5">Chương 5: Tư tưởng HCM về đại đoàn kết toàn dân tộc & đoàn kết quốc tế</h2>

        <section id="5-1">
          <h3>5.1. Đại đoàn kết toàn dân tộc</h3>
          <h4 id="5-1-1">5.1.1. Vai trò</h4>
          <p>Đại đoàn kết là vấn đề mang <em>ý nghĩa chiến lược</em>, quyết định thành công của cách mạng: là <strong>sức mạnh vô địch</strong>, là <strong>chìa khóa then chốt</strong> của mọi thắng lợi, là <strong>mục tiêu & nhiệm vụ hàng đầu</strong> cần quán triệt.</p>
          <ul>
            <li>Chân lý: “Đoàn kết, đoàn kết, đại đoàn kết. Thành công, thành công, đại thành công”.</li>
            <li>Mục tiêu: “Một nước Việt Nam hòa bình, thống nhất, độc lập, dân chủ và giàu mạnh…”.</li>
          </ul>

          <h4 id="5-1-2">5.1.2. Lực lượng</h4>
          <p><strong>Chủ thể:</strong> toàn thể dân tộc Việt Nam; không phân biệt giai cấp, tôn giáo, dân tộc, nghề nghiệp… miễn là cùng phụng sự Tổ quốc.</p>
          <p><strong>Nền tảng:</strong> liên minh <em>công – nông – trí thức</em> dưới sự lãnh đạo của Đảng; củng cố chặt chẽ để bảo đảm bền vững khối đoàn kết.</p>

          <h4 id="5-1-3">5.1.3. Điều kiện xây dựng</h4>
          <ol>
            <li>Kết hợp lợi ích chung – riêng; đặt lợi ích dân tộc lên trên hết.</li>
            <li>Kế thừa truyền thống yêu nước, nhân nghĩa, đoàn kết.</li>
            <li>Khoan dung, độ lượng; “cầu đồng tồn dị”.</li>
            <li>Xây dựng niềm tin của nhân dân: dân tin – dân yêu – dân kính.</li>
          </ol>

          <h4 id="5-1-4">5.1.4. Hình thức & nguyên tắc – Mặt trận dân tộc thống nhất</h4>
          <p><strong>Hình thức:</strong> Mặt trận dân tộc thống nhất – ngôi nhà chung của mọi người Việt Nam (Việt Minh, Liên Việt, Mặt trận Tổ quốc…).</p>
          <p><strong>Nguyên tắc:</strong> (1) Nền tảng liên minh công–nông–trí thức dưới sự lãnh đạo của Đảng; (2) Hiệp thương dân chủ; (3) Đoàn kết lâu dài, chân thành, cùng tiến bộ.</p>

          <h4 id="5-1-5">5.1.5. Phương thức</h4>
          <p><strong>Dân vận</strong> là phương thức cơ bản: tổ chức – giáo dục – phát huy trí tuệ, sức mạnh vật chất & tinh thần của quần chúng; xây dựng hệ thống tổ chức quần chúng (Công đoàn, Hội Nông dân, Đoàn Thanh niên, Hội Phụ nữ…) phối hợp trong Mặt trận.</p>
        </section>

        <section id="lich-su-41-46">
          <h3>I. Chứng minh lịch sử: 1941–1946</h3>
          <ul>
            <li><strong>1941:</strong> Hồ Chí Minh về nước, chủ trì Hội nghị TW 8, xác định nhiệm vụ giải phóng dân tộc; thành lập Việt Minh để đoàn kết toàn dân.</li>
            <li><strong>1945–1946:</strong> Cách mạng Tháng Tám thành công; 2/9/1945 tuyên ngôn độc lập; xây dựng chính quyền non trẻ; 19/12/1946 lời kêu gọi toàn quốc kháng chiến.</li>
          </ul>
        </section>

        <section id="lich-su-46-75">
          <h3>II. Chứng minh lịch sử: 1946–1975</h3>
          <ul>
            <li>Kháng chiến chống Pháp (1946–1954); sau 1954, miền Bắc quá độ lên CNXH; HCM phát triển quan điểm về CNXH.</li>
            <li>Chống Mỹ cứu nước (1954–1975): chân lý “Không có gì quý hơn độc lập, tự do”; kết hợp sức mạnh dân tộc – thời đại – đoàn kết quốc tế → thống nhất 1975.</li>
          </ul>
        </section>

        <section id="hien-dai-86-nay">
          <h3>III. Chứng minh hiện đại: 1986 – nay</h3>
          <ul>
            <li>Đổi mới (ĐH VI – 1986); ĐH VII (1991) khẳng định TT HCM + CN Mác–Lênin là nền tảng.</li>
            <li>Tiếp tục vận dụng: mục tiêu dân giàu, nước mạnh, dân chủ, công bằng, văn minh; nhấn mạnh chiến lược <em>đại đoàn kết</em> và phát triển văn hóa – con người.</li>
          </ul>
          <p class="small">Tổng kết: Tư tưởng HCM về đại đoàn kết là <strong>đường lối chiến lược</strong> xuyên suốt – động lực & nguồn lực để giành và giữ độc lập, xây dựng & bảo vệ Tổ quốc trong mọi thời kỳ.</p>
        </section>

        <section id="hinh-anh">
          <h3>Hình ảnh minh họa</h3>
          <p class="small">Ảnh minh họa cho nội dung Chương 5. Bấm ảnh để phóng to. Thay ảnh bằng cách đặt file trong thư mục <code>/images</code> đúng tên phía dưới.</p>
          <div class="gallery" id="gallery">
            <figure class="fig">
              <img loading="lazy" src="images/doan-ket-lehoi.jpeg" alt="Không khí đoàn kết toàn dân – lễ diễu hành">
              <figcaption>Không khí đoàn kết toàn dân – sắc màu các dân tộc cùng cờ Tổ quốc.</figcaption>
            </figure>
            <figure class="fig">
              <img loading="lazy" src="images/bac-ho-dan-toc.jpg" alt="Chủ tịch Hồ Chí Minh với đồng bào các dân tộc">
              <figcaption>Chủ tịch Hồ Chí Minh với đồng bào các dân tộc – biểu tượng của khối đại đoàn kết.</figcaption>
            </figure>
            <figure class="fig">
              <img loading="lazy" src="images/bac-ho-giua-nhan-dan.jpg" alt="Bác Hồ giữa biển người">
              <figcaption>Bác Hồ giữa biển người: “Dân là gốc” – niềm tin là nền tảng của đoàn kết.</figcaption>
            </figure>
          </div>
        </section>
      </article>
    </main>

    <footer class="foot small">
      © 2025 Nhóm Học phần HCM – Single-file template. Có thể deploy lên Vercel/Netlify/GitHub Pages.
    </footer>
  </div>

  <script>
    // Helpers
    const $$ = (sel, root=document) => Array.from(root.querySelectorAll(sel));
    const $  = (sel, root=document) => root.querySelector(sel);

    // Cập nhật thời gian
    const fmt = new Intl.DateTimeFormat('vi-VN', { dateStyle: 'medium', timeStyle: 'short' });
    $('#lastUpdated').textContent = fmt.format(new Date());

    // TOC auto-build
    function buildTOC(){
      const toc = $('#toc');
      toc.querySelectorAll('a').forEach(a=>a.remove());
      $$('#paper h2, #paper h3, #paper h4').forEach(h => {
        const id = h.id || h.textContent.toLowerCase().replace(/[^a-z0-9à-ỹ\s-]/gi,'').trim().replace(/\s+/g,'-');
        h.id = id;
        const a = document.createElement('a');
        a.href = `#${id}`;
        a.textContent = h.tagName === 'H2' ? `★ ${h.textContent}` : h.textContent;
        toc.appendChild(a);
      });
    }
    buildTOC();

    // Scrollspy
    function onScrollSpy(){
      const fromTop = window.scrollY + 120;
      const heads = $$('#paper h2, #paper h3, #paper h4');
      let currentId = heads[0]?.id;
      for(const h of heads){ if(h.offsetTop <= fromTop) currentId = h.id; else break; }
      $$('#toc a').forEach(a => a.classList.toggle('active', a.getAttribute('href') === `#${currentId}`));
    }
    document.addEventListener('scroll', onScrollSpy, {passive:true});

    // Print & Copy deep link
    $('#btnPrint').addEventListener('click', () => window.print());
    $('#btnCopyLink').addEventListener('click', () => {
      const active = $('#toc a.active') || $('#toc a');
      const url = new URL(location.href);
      if(active){ url.hash = active.getAttribute('href'); }
      navigator.clipboard.writeText(url.toString()).then(()=> toast('Đã sao chép liên kết mục hiện tại.'));
    });

    // Tìm kiếm highlight
    $('#btnFind').addEventListener('click', () => highlight($('#searchBox').value.trim()));
    $('#searchBox').addEventListener('keydown', e=>{ if(e.key==='Enter') highlight(e.target.value.trim()); });
    function highlight(q){
      $$('#paper mark').forEach(m => { const t = document.createTextNode(m.textContent); m.replaceWith(t); });
      if(!q) return;
      const walker = document.createTreeWalker($('#paper'), NodeFilter.SHOW_TEXT, null);
      const re = new RegExp(q.replace(/[.*+?^${}()|[\]\\]/g,'\\$&'), 'gi');
      const nodes = [];
      while(walker.nextNode()) nodes.push(walker.currentNode);
      nodes.forEach(node => {
        const frag = document.createDocumentFragment();
        let lastIdx = 0; const text = node.nodeValue;
        text.replace(re, (match, idx) => {
          frag.appendChild(document.createTextNode(text.slice(lastIdx, idx)));
          const m = document.createElement('mark'); m.textContent = match; frag.appendChild(m);
          lastIdx = idx + match.length;
        });
        frag.appendChild(document.createTextNode(text.slice(lastIdx)));
        if(re.test(text)) node.parentNode.replaceChild(frag, node);
      });
      toast('Đã đánh dấu kết quả tìm kiếm.');
    }

    // Inline edit + LocalStorage
    const KEY = 'hcm-page-content';
    const article = $('#paper');
    const btnEdit = $('#btnEdit');
    const setEditable = (v) => { article.contentEditable = v; btnEdit.textContent = v ? '💾 Lưu & Tắt sửa' : '✍️ Chỉnh sửa'; };
    const saved = localStorage.getItem(KEY);
    if(saved){ article.innerHTML = saved; buildTOC(); }
    btnEdit.addEventListener('click', () => {
      const editing = article.isContentEditable;
      if(editing){
        localStorage.setItem(KEY, article.innerHTML);
        toast('Đã lưu nội dung (LocalStorage).');
        setEditable(false);
        buildTOC();
      } else {
        setEditable(true); article.focus();
      }
    });
    document.addEventListener('keydown', (e)=>{ if(e.key.toLowerCase()==='s' && !e.metaKey && !e.ctrlKey){ e.preventDefault(); btnEdit.click(); }});

    function toast(msg){
      const t = document.createElement('div');
      t.textContent = msg;
      t.style.cssText = 'position:fixed;left:50%;bottom:24px;transform:translateX(-50%);background:#0b1020;padding:10px 14px;border:1px solid var(--line);border-radius:10px;z-index:9999';
      document.body.appendChild(t); setTimeout(()=>t.remove(), 1800);
    }

    // Lightbox
    const lb = document.createElement('div');
    lb.className = 'lb';
    lb.innerHTML = '<button class="close">✕</button><div class="lb-inner"><img alt=""/></div><div class="caption"></div>';
    document.body.appendChild(lb);
    const lbImg = lb.querySelector('img');
    const lbCap = lb.querySelector('.caption');
    lb.addEventListener('click', (e)=>{ if(e.target===lb || e.target.classList.contains('close')) lb.classList.remove('open'); });

    function enableLightbox(){
      $$('#gallery img').forEach(img=>{
        img.style.cursor = 'zoom-in';
        img.addEventListener('click', ()=>{
          lbImg.src = img.src; lbImg.alt = img.alt || '';
          const cap = img.closest('figure')?.querySelector('figcaption')?.textContent?.trim() || '';
          lbCap.textContent = cap; lb.classList.add('open');
        });
      });
    }
    enableLightbox();
    new MutationObserver(()=> enableLightbox()).observe(document.getElementById('paper'), { subtree:true, childList:true });
  </script>

  <style media="print">
    header, .toc, .btn, .toolbar, .foot, #btnPrint, #btnEdit, #btnCopyLink { display: none !important; }
    main{ grid-template-columns:1fr; }
    body{ background:#fff; color:#000 }
    .card{ border:0; background:#fff }
    a{ color:#000; text-decoration:none }
  </style>
</body>
</html>
